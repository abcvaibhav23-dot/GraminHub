{% extends "base.html" %}
{% block title %}Login | GraminHub{% endblock %}
{% block content %}
<section class="mx-auto max-w-7xl">
  <div class="mx-auto max-w-xl rounded-3xl border border-slate-200 bg-white/90 p-6 shadow-sm sm:p-8">
    <h1 data-ui-i18n="v2_login_title" class="font-display text-3xl font-extrabold text-slate-900">लॉगिन (OTP)</h1>
    <p data-ui-i18n="v2_login_subtitle" class="mt-2 text-base text-slate-700">सिर्फ मोबाइल नंबर डालें। OTP आएगा।</p>

    <div class="mt-5 grid gap-3">
      <label data-ui-i18n="v2_login_phone_label" class="text-sm font-semibold text-slate-800" for="otpPhone">मोबाइल नंबर</label>
      <input id="otpPhone" data-login-placeholder="otp_phone_placeholder" class="gh-input w-full rounded-xl px-3 py-3 text-base" placeholder="10-digit mobile" />

      <div class="rounded-2xl border border-slate-200 bg-slate-50 p-4">
        <p data-ui-i18n="v2_login_role_question" class="text-sm font-semibold text-slate-800">आप कौन हैं?</p>
        <div class="mt-3 grid gap-2 sm:grid-cols-3">
          <button type="button" onclick="setOtpRole('user')" class="rounded-xl bg-white px-4 py-3 text-sm font-semibold text-slate-800 shadow-sm hover:bg-slate-100"><span data-ui-i18n="v2_login_role_buyer">Buyer</span></button>
          <button type="button" onclick="setOtpRole('supplier')" class="rounded-xl bg-white px-4 py-3 text-sm font-semibold text-slate-800 shadow-sm hover:bg-slate-100"><span data-ui-i18n="v2_login_role_supplier">Supplier</span></button>
          <button type="button" onclick="setOtpRole('admin')" class="rounded-xl bg-white px-4 py-3 text-sm font-semibold text-slate-800 shadow-sm hover:bg-slate-100"><span data-ui-i18n="v2_login_role_admin">Admin</span></button>
        </div>
        <select id="otpRole" class="hidden">
          <option value="user">Buyer</option>
          <option value="supplier">Supplier</option>
          <option value="admin">Admin</option>
        </select>
      </div>

      <button onclick="requestPhoneOtp()" class="rounded-xl bg-brand-700 px-5 py-3 text-base font-semibold text-white transition hover:bg-brand-900"><span data-login-i18n="otp_request_btn">Get OTP</span></button>

      <label data-ui-i18n="v2_login_otp_label" class="text-sm font-semibold text-slate-800" for="otpCode">OTP</label>
      <input id="otpCode" data-login-placeholder="otp_code_placeholder" class="gh-input w-full rounded-xl px-3 py-3 text-base" placeholder="6-digit OTP" />

      <button onclick="verifyPhoneOtpLogin()" class="rounded-xl bg-blue-600 px-5 py-3 text-base font-semibold text-white transition hover:bg-blue-700"><span data-login-i18n="otp_verify_btn">Verify & Login</span></button>

      {% if show_demo_hints %}
      <p id="otpHint" data-login-i18n="otp_hint" class="text-xs text-slate-600">Demo OTP स्क्रीन पर दिखेगा।</p>
      {% else %}
      <p id="otpHint" data-login-i18n="otp_hint" class="text-xs text-slate-600">OTP भेज दिया गया है।</p>
      {% endif %}

      <pre id="loginResult" class="gh-status-pre mt-2 hidden rounded-xl p-3 text-xs" aria-live="polite"></pre>
    </div>
  </div>
</section>

<script>
  function setOtpRole(role) {
    const select = document.getElementById("otpRole");
    if (select) select.value = role;
  }
  // Default selection
  setOtpRole("user");
</script>
{% endblock %}
